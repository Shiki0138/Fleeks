# FTP接続トラブルシューティング

## よくある原因と解決方法

### 1. サーバー名の形式
- ❌ 間違い: `ftp://sv12345.xserver.jp`
- ❌ 間違い: `https://sv12345.xserver.jp`
- ✅ 正しい: `sv12345.xserver.jp`

### 2. ユーザー名の形式
エックスサーバーでは2種類のFTPアカウントがあります：

**メインFTPアカウント**
- ユーザー名: サーバーID（例: `xs123456`）

**サブFTPアカウント**
- ユーザー名: `ftpuser@domain.com` 形式

### 3. パスワードの問題
- 特殊文字が含まれている場合、GitHubシークレットで正しくエスケープされない可能性
- 解決策：FTPパスワードを英数字のみに変更

### 4. 接続方式の問題
エックスサーバーは以下をサポート：
- FTP（ポート21）
- FTPS（暗号化FTP、ポート21）
- SFTP（SSH経由、ポート10022）※プランによる

## 推奨される確認手順

1. **FileZillaで手動接続テスト**
   - ホスト: sv12345.xserver.jp
   - ユーザー名: あなたのFTPユーザー名
   - パスワード: あなたのFTPパスワード
   - ポート: 21
   - 暗号化: 明示的なFTP over TLSを使用

2. **エックスサーバーでサブFTPアカウントを作成**
   - サーバーパネル → FTP → サブFTPアカウント設定
   - 新規作成
   - パスワードは英数字のみで設定
   - ディレクトリは `/home/サーバーID/ドメイン名/public_html` を指定

3. **GitHubシークレットを再設定**
   - 既存のシークレットを削除
   - 新しく作成（コピペ時の空白に注意）